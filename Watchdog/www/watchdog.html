<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/www/style.css">
        <title>Bitcoin Puzzle Pools</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>
    <body>

        <table id="main">
            <colgroup>
                <col span="1" style="width: 20%;">
                <col span="1" style="width: 80%;">
            </colgroup>
            <tr class="background">
                <td class="background top">

                    <table id="menu_header">
                        <tr class="background">
                            <td class="background">
                                <img src="/www/logo.png" />
                            </td>
                        </tr>
                    </table>

                    <br>
                </table>


                </td>

                <td class="background top" id="monitor_worker">
                    <table>
                        <tr class="background">
                            <td class="background top">
                                <div id="containers"></div>
                            </td>
                        </tr>
                        <tr class="background">
                            <td class="background top">
                                <div id="gpus"></div>
                            </td>
                        </tr>
                        <tr class="background">
                            <td class="background top">
                                <div id="logs"></div>
                            </td>
                        </tr>
                    </table>
                </td>

            </tr>
        </table>

    </body>

    <script>


        function refresh_gpus() {
            $.ajax({
                url: "gpus",
                cache: false,
                success: function(html) { $("#gpus").html(html+'<br>'); }
           });
        }


        function refresh_containers() {
            $.ajax({
                url: "containers",
                cache: false,
                success: function(html) { $("#containers").html(html+'<br>'); }
           });
        }

        function refresh_logs() {
            $.ajax({
                url: "logs",
                cache: false,
                success: function(html) { $("#logs").html(html+'<br>'); }
           });
        }

        setInterval(refresh_gpus, 10000);          // 10 seconds
        setInterval(refresh_containers, 30000);    // 30 seconds
        setInterval(refresh_logs, 60000);          // 1 minute

        refresh_gpus();
        refresh_containers();
        refresh_logs();

    </script>
</html>
